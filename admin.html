<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AUREX Admin</title>
<style>
body{font-family:Arial;padding:20px;background:#f4f4f4}
.card{background:#fff;padding:25px;border-radius:10px;max-width:600px;margin:auto;margin-top:20px}
input, select{width:100%;padding:10px;margin:8px 0}
button{padding:12px 20px;background:black;color:white;border:none;cursor:pointer;margin-top:10px}
img{max-width:150px;margin-top:10px;display:block}
</style>
</head>
<body>

<div class="card">
<h2>AUREX Store Manager</h2>

<label>Select Store</label>
<select id="storeSelect"></select>

<button onclick="newStore()">+ New Store</button>

<div id="storeForm">
<label>Email</label>
<input id="storeEmail" type="email">

<label>Password</label>
<input id="storePassword" type="password">

<label>Store Name</label>
<input id="storeName">

<label>Logo Text</label>
<input id="logoText">

<label>Logo Image</label>
<input id="logoFile" type="file" accept="image/*">
<img id="logoPreview">

<label>Hero Title</label>
<input id="heroTitle">

<label>Description</label>
<input id="heroDescription">

<label>Domain</label>
<input id="storeDomain" placeholder="example.com">

<label>Primary Color</label>
<input id="primary" type="color">
<input id="store-logo" type="file" class="w-full border p-2 mb-3">
    
<label>Background</label>
<input id="background" type="color">

<label>Text Color</label>
<input id="text" type="color">

<button onclick="saveStore()">Save Store</button>
<button onclick="previewStore()">Open Store</button>
</div>
</div>

<script>
let stores = JSON.parse(localStorage.getItem("AUREX_STORES")) || [];
let currentStore = null;

// Load store list
function loadStores(){
    const select = document.getElementById("storeSelect");
    select.innerHTML = '<option value="">-- Select Store --</option>';
    stores.forEach((s,i)=>{
        select.innerHTML += `<option value="${i}">${s.storeName}</option>`;
    });
}

// When selecting a store
document.getElementById("storeSelect").addEventListener("change", function(){
    const idx = this.value;
    if(idx === "") return clearForm();
    currentStore = idx;
    loadStoreForm(stores[idx]);
});

// Clear form
function clearForm(){
    currentStore = null;
    document.getElementById("storeEmail").value = '';
    document.getElementById("storePassword").value = '';
    document.getElementById("storeName").value = '';
    document.getElementById("logoText").value = '';
    document.getElementById("logoPreview").src = '';
    document.getElementById("heroTitle").value = '';
    document.getElementById("heroDescription").value = '';
    document.getElementById("storeDomain").value = '';
    document.getElementById("primary").value = '#000000';
    document.getElementById("background").value = '#ffffff';
    document.getElementById("text").value = '#000000';
}

// Load store data into form
function loadStoreForm(store){
    document.getElementById("storeEmail").value = store.email;
    document.getElementById("storePassword").value = store.password;
    document.getElementById("storeName").value = store.storeName;
    document.getElementById("logoText").value = store.logoText;
    document.getElementById("logoPreview").src = store.logoImage || '';
    document.getElementById("heroTitle").value = store.heroTitle;
    document.getElementById("heroDescription").value = store.heroDescription;
    document.getElementById("storeDomain").value = store.domain || '';
    document.getElementById("primary").value = store.colors.primary;
    document.getElementById("background").value = store.colors.background;
    document.getElementById("text").value = store.colors.text;
}

// New store
function newStore(){
    clearForm();
    currentStore = null;
}

// Handle logo file upload
document.getElementById("logoFile").addEventListener("change", function(){
    const file = this.files[0];
    if(file){
        const reader = new FileReader();
        reader.onload = function(e){
            document.getElementById("logoPreview").src = e.target.result;
        };
        reader.readAsDataURL(file);
    }
});

// Save store
function saveStore(){
    const storeData = {
        email: document.getElementById("storeEmail").value,
        password: document.getElementById("storePassword").value,
        storeName: document.getElementById("storeName").value,
        logoText: document.getElementById("logoText").value,
        logoImage: document.getElementById("logoPreview").src,
        heroTitle: document.getElementById("heroTitle").value,
        heroDescription: document.getElementById("heroDescription").value,
        domain: document.getElementById("storeDomain").value,
        colors:{
            primary: document.getElementById("primary").value,
            background: document.getElementById("background").value,
            text: document.getElementById("text").value
        }
    };
    if(currentStore === null){
        stores.push(storeData);
    }else{
        stores[currentStore] = storeData;
    }
    localStorage.setItem("AUREX_STORES", JSON.stringify(stores));
    alert("Store Saved âœ”");
    loadStores();
}

function previewStore(){
    if(currentStore === null){
        alert("Select a store first!");
        return;
    }
    const domain = stores[currentStore].domain || "index.html";
    window.open(domain,"_blank");
}

loadStores();
clearForm();
</script>

</body>
</html>
